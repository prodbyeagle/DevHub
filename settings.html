<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/icon.ico">
    <title>Settings</title>
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <style>
        body {
            font-family: SF Pro Medium, 'Ubuntu', Roboto, Oxygen, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #f0f0f0;
            color: #333;
            transition: all 0.3s ease;
        }

        /* Neumorphism styles for Dark Mode */
        body.dark-mode {
            background-color: #222;
            color: #eee;
            transition: all 0.3s ease;
        }

        /* Neumorphism styles for the form */
        .neumorphism-form {
            background-color: #f0f0f0;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.5), -8px -8px 16px rgba(255, 255, 255, 0.05);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        body.dark-mode .neumorphism-form {
            background-color: #222;
            box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.5), -8px -8px 16px rgba(255, 255, 255, 0.05);
        }

        /* Neumorphism styles for the input fields */
        .neumorphism-input {
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 0.5rem;
            margin-top: 0.5rem;
            transition: border-color 0.3s ease, background-color 0.3s ease;
        }

        body.dark-mode .neumorphism-input {
            border-color: #555;
            background-color: #333;
            color: #eee;
        }

        /* Neumorphism styles for the submit button */
        .neumorphism-button {
            background-color: #007bff;
            color: #fff;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.1), -4px -4px 8px rgba(255, 255, 255, 0.5);
        }

        .neumorphism-button:hover {
            background-color: #0056b3;
            box-shadow: 0 0 16px rgba(0, 0, 0, 0.3);
        }

        body.dark-mode .neumorphism-button {
            background-color: #222;
            color: #eee;
            box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.5), -8px -8px 16px rgba(255, 255, 255, 0.05);
        }

        body.dark-mode .neumorphism-button:hover {
            background-color: #333;
        }

        /* Dark Mode styles for the checkbox */
        .neumorphism-checkbox {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 1.4em;
            height: 1.4em;
            border: 2px solid #ccc;
            border-radius: 4px;
            outline: none;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .neumorphism-checkbox:checked {
            background-color: #007bff;
            border-color: #007bff;
        }

        /* Custom styles for the switch label */
        .switch-label {
            margin-left: 0.5rem;
            font-size: 0.875rem;
            color: #333;
        }

        /* Dark Mode styles for the switch label */
        body.dark-mode .switch-label {
            color: #eee;
        }

        .banned-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999; /* Höheren Z-Index-Wert verwenden */
}

#suspendedUser {
    text-align: center;
    background-color: #eee;
    color: #222;
    padding: 20px;
    border-radius: 10px;
    display: none; /* Standardmäßig ausgeblendet */
}

body.dark-mode #suspendedUser {
    background-color: #222;
    color: #eee;
}
    </style>
</head>
<body class="dark-mode">
    <div class="container mx-auto py-8">
        <div class="neumorphism-form max-w-md mx-auto">
            <h1 class="text-3xl font-bold text-center mb-8">Dev Hub: Settings</h1>
            <div class="p-4">
                <label class="block text-sm font-bold mb-2" for="username">
                    Username
                </label>
                <p class="text-lg" id="username"></p> <!-- Hier wird der Benutzername angezeigt -->
            </div>
            <div class="p-4 border-t border-gray-200">
                <label class="block text-sm font-bold mb-2" for="email">
                    Email
                </label>
                <!-- Passwort anzeigen, aber unkenntlich machen -->
                <div class="flex items-center">
                    <p class="text-lg" id="email">******</p>
                    <div class="ml-auto">
                        <!-- SVG-Symbol für das Auge zum Anzeigen/Verbergen des Passworts -->
                        <svg id="toggleEmailVisibility" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2 12s3-6 10-6 10 6 10 6-3 6-10 6-10-6-10-6z" />
                        </svg>
                    </div>
                </div>
            </div>
            <div class="p-4 border-t border-gray-200">
                <label class="block text-sm font-bold mb-2" for="password">
                    Password
                </label>
                <div class="flex items-center">
                    <p class="text-lg" id="password">******</p>
                    <div class="ml-auto">
                        <svg id="togglePasswordVisibility" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2 12s3-6 10-6 10 6 10 6-3 6-10 6-10-6-10-6z" />
                        </svg>
                    </div>
                </div>
            </div>

            <div id="changePasswordOverlay" class="fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex justify-center items-center hidden" style="z-index: 1000;">
                <div class="neumorphism-form max-w-md mx-auto p-8">
                    <h1 class="text-3xl font-bold text-center mb-8">Change Password</h1>
                    <form id="changePasswordForm">
                        <div class="mb-4">
                            <label class="block text-sm font-bold mb-2" for="currentPassword">
                                Current Password
                            </label>
                            <input type="password" id="currentPassword" name="currentPassword" class="neumorphism-input" autocomplete>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-bold mb-2" for="newPassword">
                                New Password
                            </label>
                            <input type="password" id="newPassword" name="newPassword" class="neumorphism-input" autocomplete>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-bold mb-2" for="confirmPassword">
                                Confirm New Password
                            </label>
                            <input type="password" id="confirmPassword" name="confirmPassword" class="neumorphism-input" autocomplete>
                        </div>
                        <button id="submitPasswordChange" class="neumorphism-button w-full mt-4">Change Password</button>
                    </form>
                    <button id="closePasswordOverlay" class="neumorphism-button w-full mt-4">Close</button>
                </div>
            </div>

            <div id="changeUsernameOverlay" class="fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex justify-center items-center hidden" style="z-index: 1000;">
                <div class="neumorphism-form max-w-md mx-auto p-8">
                    <h1 class="text-3xl font-bold text-center mb-8">Change Username</h1>
                    <form id="changeUsernameForm">
                        <div class="mb-4">
                            <label class="block text-sm font-bold mb-2" for="currentUsername">
                                Current Username
                            </label>
                            <input type="text" id="currentUsername" name="currentUsername" class="neumorphism-input" autocomplete>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-bold mb-2" for="newUsername">
                                New Username
                            </label>
                            <input type="text" id="newUsername" name="newUsername" class="neumorphism-input" autocomplete>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-bold mb-2" for="confirmUsername">
                                Confirm New Username
                            </label>
                            <input type="text" id="confirmUsername" name="confirmUsername" class="neumorphism-input" autocomplete>
                        </div>
                        <button id="submitUsernameChange" class="neumorphism-button w-full mt-4">Change Username</button>
                    </form>
                    <button id="closeUsernameOverlay" class="neumorphism-button w-full mt-4">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="flex justify-center items-center fixed inset-x-0 top-120" style="z-index: 999;">
        <div class="switch-container mr-4">
        </div>
        <div class="mr-4">
            <button id="openChangePasswordOverlayBtn" class="neumorphism-button" style="font-size: 16px;">Change Password</button>
            <!--  <button id="openChangeUsernameOverlayBtn" class="neumorphism-button" style="font-size: 16px;">Change Username</button> -->
            <button id="deleteAccountBtn" class="neumorphism-button text-blue-600 h-full delete-button">Delete Account</button>
            <label class="switch">
                <input id="modeSwitch" type="checkbox" style="display: none;">
                <span class="neumorphism-button h-full text-blue-600">Dark Mode</span>
            </label>
            <a href="/home" class="neumorphism-button text-blue-600" style="font-size: 16px;">Home</a>
        </div> 
    </div>
</body>
<script>
document.addEventListener('DOMContentLoaded', async function() {
    try {
        const savedUser = localStorage.getItem('user');
        if (!savedUser) {
            console.error('User not found in local storage');
            return;
        }
        const { identifier, password, email } = JSON.parse(savedUser);

        const response = await fetch('/api/username');
        const userData = await response.json();

        // Find the user that matches the stored user data
        const matchedUser = userData.users.find(user => (user.username === identifier || user.email === identifier) && user.password === password);

        if (matchedUser) {
            // Check if the user is banned
            if (matchedUser.banned) {
                // The user is banned, show the banned overlay
                showBannedOverlay(matchedUser.username);
            } else {
                // The user is not banned, display the user data
                document.getElementById('username').textContent = matchedUser.username;
                document.getElementById('email').textContent = '********************';
                document.getElementById('password').textContent = '********************';
                // Set the password in an attribute to restore it later
                document.getElementById('password').setAttribute('data-real-password', matchedUser.password);
                document.getElementById('email').setAttribute('data-real-email', matchedUser.email);
            }
        } else {
            console.error('User data does not match stored user');
        }
    } catch (error) {
        console.error('Error fetching user data:', error);
    }
});

// Überprüfen Sie die Benutzersperrstatus
const userData = JSON.parse(localStorage.getItem('user'));
if (!userData || !userData.identifier) {
    console.error('User identifier not found in local storage');
} else {
    const username = userData.identifier;
    checkUserBanStatus(username);
}

async function checkUserBanStatus(username) {
    try {
        const userResponse = await fetch(`/api/profile/${username}`);
        const userDataResponse = await userResponse.json();
        if (userDataResponse.banned) {
            localStorage.clear();
            window.location.href = '/login';
        } else {
            document.body.classList.add('dark-mode');
        }
    } catch (error) {
        console.error('Error fetching user data:', error);
    }
}

function showNormalContent() {
    // Zeige den normalen Inhalt an
    document.body.classList.add('dark-mode');
}

// JavaScript für das Anzeigen/Verbergen des Passworts
document.getElementById('togglePasswordVisibility').addEventListener('click', function() {
    const passwordField = document.getElementById('password');
    const realPassword = passwordField.getAttribute('data-real-password');

    // Überprüfe, ob das Passwortfeld bereits sichtbar ist
    if (passwordField.textContent === realPassword) {
        // Ändere den Text auf '******', um das Passwort zu verbergen
        passwordField.textContent = '*****************';
    } else {
        // Zeige das echte Passwort an
        passwordField.textContent = realPassword;
    }
});

// JavaScript für das Anzeigen/Verbergen der E-Mail
document.getElementById('toggleEmailVisibility').addEventListener('click', function() {
    const emailField = document.getElementById('email');
    const realEmail = emailField.getAttribute('data-real-email');

    // Überprüfe, ob das E-Mail-Feld bereits sichtbar ist
    if (emailField.textContent === realEmail) {
        // Ändere den Text auf '******', um das E-Mail zu verbergen
        emailField.textContent = '*****************';
    } else {
        // Zeige die echte E-Mail an
        emailField.textContent = realEmail;
    }
});

    // JavaScript für Dark/White Mode Switch und das Speichern des Moduswerts im Benutzerprofil
    const modeSwitch = document.getElementById('modeSwitch');
    modeSwitch.addEventListener('change', () => {
        if (modeSwitch.checked) {
            document.body.classList.remove('light-mode');
            document.body.classList.add('dark-mode');
            saveModePreference('dark');
        } else {
            document.body.classList.remove('dark-mode');
            document.body.classList.add('light-mode');
            saveModePreference('light');
        }
    });
    
    function saveModePreference(mode) {
        // Hier wird der Moduswert im Benutzerprofil gespeichert
        localStorage.setItem('mode', mode);
    }
    
    function loadModePreference() {
            // Lade den gespeicherten Moduswert aus dem Local Storage
            const mode = localStorage.getItem('mode');
            if (mode === 'light') {
                // Wenn der Modus dunkel ist, füge die entsprechende Klasse hinzu
                document.body.classList.remove('dark-mode');
                document.body.classList.add('light-mode');
            } else {
                // Andernfalls füge die Klasse für den hellen Modus hinzu
                document.body.classList.remove('light-mode');
                document.body.classList.add('dark-mode');
            }
        }
        loadModePreference();
    
// JavaScript, um das Passwortänderungs-Overlay zu öffnen
document.getElementById('openChangePasswordOverlayBtn').addEventListener('click', function() {
    document.getElementById('changePasswordOverlay').classList.remove('hidden');
});

// JavaScript, um das Passwortänderungs-Overlay zu schließen
document.getElementById('closePasswordOverlay').addEventListener('click', function() {
    document.getElementById('changePasswordOverlay').classList.add('hidden');
});

const changePasswordForm = document.getElementById('changePasswordForm'); // Ändern Sie die ID hier
changePasswordForm.addEventListener('submit', async (event) => {
    event.preventDefault(); // Verhindert das Standardverhalten des Formulars (z. B. Neuladen der Seite)

    const currentPassword = document.getElementById('currentPassword').value;
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;

    try {
        // Überprüfen, ob der Benutzer im Local Storage vorhanden ist
        const savedUser = localStorage.getItem('user');
        if (!savedUser) {
            console.error('User not found in local storage');
            return;
        }

        // Parse die Benutzerdaten aus dem Local Storage
        const { identifier, password } = JSON.parse(savedUser);

        console.log('Sending password change request...');
        console.log('Current Password:', currentPassword);
        console.log('New Password:', newPassword);

        // Senden der Passwortänderungsanforderung an den Server
        const response = await fetch('/api/profile/change/passwort', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                username: identifier, // Verwende den Benutzernamen aus dem Local Storage
                currentPassword: currentPassword, // Hier wird das aktuelle Passwort gesendet
                newPassword: newPassword
            })
        });

        console.log('Response received:', response);

        if (response.ok) {
            const savedUser = JSON.parse(localStorage.getItem('user'));
            savedUser.password = newPassword;
            localStorage.setItem('user', JSON.stringify(savedUser));
            Toastify({
                text: 'Password changed successfully',
                duration: 3000,
                close: true,
                backgroundColor: 'linear-gradient(to right, #00b09b, #96c93d)',
            }).showToast();
            document.getElementById('changePasswordOverlay').classList.add('hidden');
        } else {
            console.error('Failed to change password:', response.statusText);
            // Hier kannst du eine Fehlermeldung anzeigen
            Toastify({
                text: 'Failed to change password: ' + response.statusText,
                duration: 3000,
                close: true,
                backgroundColor: 'linear-gradient(to right, #ff416c, #ff4b2b)',
            }).showToast();
        }
    } catch (error) {
        console.error('Error changing password:', error);
        // Hier kannst du eine Fehlermeldung anzeigen
        Toastify({
            text: 'Error changing password: ' + error,
            duration: 3000,
            close: true,
            backgroundColor: 'linear-gradient(to right, #ff416c, #ff4b2b)',
        }).showToast();
    }
});

// // JavaScript, um das Benutzernamenänderungs-Overlay zu öffnen
// document.getElementById('openChangeUsernameOverlayBtn').addEventListener('click', function() {
//     document.getElementById('changeUsernameOverlay').classList.remove('hidden');
// });
// 
// // JavaScript, um das Benutzernamenänderungs-Overlay zu schließen
// document.getElementById('closeUsernameOverlay').addEventListener('click', function() {
//     document.getElementById('changeUsernameOverlay').classList.add('hidden');
// });
// 
// const changeUsernameForm = document.getElementById('changeUsernameForm');
// changeUsernameForm.addEventListener('submit', async (event) => {
//     event.preventDefault(); // Verhindert das Standardverhalten des Formulars (z. B. Neuladen der Seite)
// 
//     const currentUsername = document.getElementById('currentUsername').value; // Aktuelles Passwort
//     const newUsername = document.getElementById('newUsername').value; // Neuer Benutzername
//     const confirmUsername = document.getElementById('confirmUsername').value; // Bestätigung des neuen Benutzernamens
// 
//     try {
//         // Überprüfen, ob der Benutzer im Local Storage vorhanden ist
//         const savedUser = localStorage.getItem('user');
//         if (!savedUser) {
//             console.error('User not found in local storage');
//             return;
//         }
// 
//         // Parse die Benutzerdaten aus dem Local Storage
//         const { identifier } = JSON.parse(savedUser);
// 
//         // Überprüfen, ob das neue Benutzernamenfeld nicht leer ist
//         if (!newUsername) {
//             console.error('New username cannot be empty');
//             return;
//         }
// 
//         // Überprüfen, ob der neue Benutzername mit der Bestätigung übereinstimmt
//         if (newUsername !== confirmUsername) {
//             console.error('New username and confirm username do not match');
//             return;
//         }
// 
//         console.log('Sending username change request...');
//         console.log('New Username:', newUsername);
// 
//         // Senden der Benutzernamenänderungsanforderung an den Server
//         const response = await fetch('/api/profile/change/username', {
//             method: 'POST',
//             headers: {
//                 'Content-Type': 'application/json'
//             },
//             body: JSON.stringify({
//                 username: identifier, // Aktueller Benutzername
//                 currentUsername: currentUsername, // Aktuelles Passwort
//                 newUsername: newUsername // Neuer Benutzername
//             })
//         });
// 
//         console.log('Response received:', response);
// 
//         if (response.ok) {
//             const savedUser = JSON.parse(localStorage.getItem('user'));
//             savedUser.identifier = newUsername; // Aktualisieren Sie den Benutzernamen im Local Storage
//             localStorage.setItem('user', JSON.stringify(savedUser));
//             Toastify({
//                 text: 'Username changed successfully',
//                 duration: 3000,
//                 close: true,
//                 backgroundColor: 'linear-gradient(to right, #00b09b, #96c93d)',
//             }).showToast();
//             document.getElementById('changeUsernameOverlay').classList.add('hidden');
//         } else {
//             console.error('Failed to change username:', response.statusText);
//             // Hier kannst du eine Fehlermeldung anzeigen
//             Toastify({
//                 text: 'Failed to change username: ' + response.statusText,
//                 duration: 3000,
//                 close: true,
//                 backgroundColor: 'linear-gradient(to right, #ff416c, #ff4b2b)',
//             }).showToast();
//         }
//     } catch (error) {
//         console.error('Error changing username:', error);
//         // Hier kannst du eine Fehlermeldung anzeigen
//         Toastify({
//             text: 'Error changing username: ' + error,
//             duration: 3000,
//             close: true,
//             backgroundColor: 'linear-gradient(to right, #ff416c, #ff4b2b)',
//         }).showToast();
//     }
// });


// // JavaScript, um das E-Mail-Änderungs-Overlay zu öffnen
// document.getElementById('openChangeEmailOverlayBtn').addEventListener('click', function() {
//     document.getElementById('changeEmailOverlay').classList.remove('hidden');
// });
// 
// // JavaScript, um das E-Mail-Änderungs-Overlay zu schließen
// document.getElementById('closeEmailOverlay').addEventListener('click', function() {
//     document.getElementById('changeEmailOverlay').classList.add('hidden');
// });
// 
// const changeEmailForm = document.getElementById('changeEmailForm');
// changeEmailForm.addEventListener('submit', async (event) => {
//     event.preventDefault(); // Verhindert das Standardverhalten des Formulars (z. B. Neuladen der Seite)
// 
//     const currentPassword = document.getElementById('currentPassword').value; // Aktuelles Passwort
//     const newEmail = document.getElementById('newEmail').value; // Neue E-Mail-Adresse
//     const confirmEmail = document.getElementById('confirmEmail').value; // Bestätigung der neuen E-Mail-Adresse
// 
//     try {
//         // Überprüfen, ob der Benutzer im Local Storage vorhanden ist
//         const savedUser = localStorage.getItem('user');
//         if (!savedUser) {
//             console.error('User not found in local storage');
//             return;
//         }
// 
//         // Parse die Benutzerdaten aus dem Local Storage
//         const { identifier } = JSON.parse(savedUser);
// 
//         // Überprüfen, ob das neue E-Mail-Feld nicht leer ist
//         if (!newEmail) {
//             console.error('New email cannot be empty');
//             return;
//         }
// 
//         // Überprüfen, ob die neue E-Mail-Adresse mit der Bestätigung übereinstimmt
//         if (newEmail !== confirmEmail) {
//             console.error('New email and confirm email do not match');
//             return;
//         }
// 
//         console.log('Sending email change request...');
//         console.log('New Email:', newEmail);
// 
//         // Senden der E-Mail-Änderungsanforderung an den Server
//         const response = await fetch('/api/profile/change/email', {
//             method: 'POST',
//             headers: {
//                 'Content-Type': 'application/json'
//             },
//             body: JSON.stringify({
//                 username: identifier, // Aktueller Benutzername
//                 currentEmail: currentEmail, // Aktuelles Passwort
//                 newEmail: newEmail // Neue E-Mail-Adresse
//             })
//         });
// 
//         console.log('Response received:', response);
// 
//         if (response.ok) {
//             Toastify({
//                 text: 'Email changed successfully',
//                 duration: 3000,
//                 close: true,
//                 backgroundColor: 'linear-gradient(to right, #00b09b, #96c93d)',
//             }).showToast();
//             document.getElementById('changeEmailOverlay').classList.add('hidden');
//         } else {
//             console.error('Failed to change email:', response.statusText);
//             // Hier kannst du eine Fehlermeldung anzeigen
//             Toastify({
//                 text: 'Failed to change email: ' + response.statusText,
//                 duration: 3000,
//                 close: true,
//                 backgroundColor: 'linear-gradient(to right, #ff416c, #ff4b2b)',
//             }).showToast();
//         }
//     } catch (error) {
//         console.error('Error changing email:', error);
//         // Hier kannst du eine Fehlermeldung anzeigen
//         Toastify({
//             text: 'Error changing email: ' + error,
//             duration: 3000,
//             close: true,
//             backgroundColor: 'linear-gradient(to right, #ff416c, #ff4b2b)',
//         }).showToast();
//     }
// });

// Delete User Account

document.getElementById('deleteAccountBtn').addEventListener('click', async () => {
    try {
        // Benutzernamen aus dem lokalen Speicher abrufen
        const { identifier: username } = JSON.parse(localStorage.getItem('user'));

        // Benutzer aus der Datenbank entfernen
        const response = await fetch(`/api/profile/delete/${username}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        });

        if (!response.ok) {
            throw new Error('Failed to delete account');
        }

        // Löschen aller Posts des Benutzers
        const deletePostsResponse = await fetch(`/api/${username}/posts`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        });

        if (!deletePostsResponse.ok) {
            throw new Error('Failed to delete user posts');
        }

        localStorage.clear();

        window.location.href = '/login';
    } catch (error) {
        console.error('Error deleting account:', error);
        // Hier könntest du eine Benachrichtigung anzeigen oder eine andere Fehlerbehandlung durchführen
    }
});
</script>
</body>
</body>
</html>